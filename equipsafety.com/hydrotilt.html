<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Careflex Hydrotilt Chair | Equipment Training</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 { font-size: 28px; margin-bottom: 5px; }
        .header p { opacity: 0.9; font-size: 16px; }
        
        .section {
            padding: 30px;
            border-bottom: 1px solid #eee;
        }
        .section:last-child { border-bottom: none; }
        .section h2 {
            font-size: 20px;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Video embed */
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            overflow: hidden;
            border-radius: 8px;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .video-note {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }
        
        /* PDF Viewer Styles */
        .pdf-viewer {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background: #525659;
        }
        .pdf-toolbar {
            background: #323639;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .pdf-toolbar button {
            background: #525659;
            border: none;
            color: white;
            padding: 8px 14px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .pdf-toolbar button:hover:not(:disabled) {
            background: #667eea;
        }
        .pdf-toolbar button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .page-info {
            color: white;
            font-size: 14px;
        }
        .pdf-canvas-wrapper {
            max-height: 500px;
            overflow-y: auto;
            background: #525659;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            gap: 15px;
        }
        .pdf-canvas-wrapper canvas {
            max-width: 100%;
            height: auto !important;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            background: white;
        }
        .pdf-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 60px 20px;
            color: white;
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.2);
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 15px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .pdf-error {
            color: #ff6b6b;
            padding: 40px;
            text-align: center;
        }
        .pdf-nav {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .pdf-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Info box for chatbot */
        .info-box {
            background: #f0f7ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 8px;
            color: #333;
        }
        
        /* Form embed */
        .form-embed {
            width: 100%;
            min-height: 800px;
            border: none;
        }
        
        @media (max-width: 600px) {
            .header h1 { font-size: 22px; }
            .section { padding: 20px; }
            .pdf-toolbar {
                flex-direction: column;
                align-items: stretch;
            }
            .pdf-nav, .pdf-actions {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üè• Careflex Hydrotilt Chair</h1>
            <p>Trelawney's Room</p>
        </div>

        <!-- Video Tutorial -->
        <div class="section">
            <h2>üé• Video Tutorials</h2>
            <div class="video-container">
                <iframe 
                    src="https://www.youtube.com/embed/videoseries?list=PLnT0dgOdtF97ho9hMdeAhDUyTymu0qp3S&rel=0&modestbranding=1" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>
            <p class="video-note">üìã This playlist contains 10 videos covering all aspects of the Hydrotilt chair. Use the playlist menu (‚ò∞) to select specific topics.</p>
        </div>

        <!-- Operating Instructions -->
        <div class="section">
            <h2>üìÑ Operating Instructions</h2>
            <div class="pdf-viewer">
                <div class="pdf-toolbar">
                    <div class="pdf-nav">
                        <button id="prevBtn" disabled>‚óÄ Prev</button>
                        <span class="page-info">
                            <span id="pageNum">-</span> / <span id="pageCount">-</span>
                        </span>
                        <button id="nextBtn" disabled>Next ‚ñ∂</button>
                    </div>
                    <div class="pdf-actions">
                        <button id="zoomOut">‚àí</button>
                        <button id="zoomIn">+</button>
                        <button id="downloadBtn">‚¨á Download</button>
                    </div>
                </div>
                <div id="pdfContainer" class="pdf-canvas-wrapper">
                    <div class="pdf-loading">
                        <div class="spinner"></div>
                        <span>Loading manual...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Assistant -->
        <div class="section">
            <h2>üí¨ Need Help? Ask Our Multilingual Assistant</h2>
            <div class="info-box">
                <p><strong>ü§ñ AI Assistant is now active!</strong></p>
                <p>Look for the chat bubble in the bottom right corner of your screen. Click it to ask questions in any language about operating this equipment.</p>
            </div>
        </div>

        <!-- SmartSuite Form -->
        <div class="section">
            <h2>‚úÖ Complete Training & Equipment Check</h2>
            <iframe 
                src="https://app.smartsuite.com/form/sba974gi/s7mAk24tk6?header=false" 
                width="100%" 
                height="800px" 
                frameborder="0"
                class="form-embed">
            </iframe>
        </div>
    </div>

    <!-- AutoReplyChat Chatbot Widget -->
    <script defer src="https://autoreplychat.com/embed.js" data-bot-id="f76e068e7d5aa0078b51ded3"></script>

    <!-- PDF.js Script -->
    <script>
    (function() {
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        const PDF_URL = '/UI-HydroTilt-XL-User-Guide-compressed.pdf?v=' + Date.now();
        
        let pdfDoc = null;
        let currentPage = 1;
        let scale = 1.5;

        const container = document.getElementById('pdfContainer');
        const pageNumEl = document.getElementById('pageNum');
        const pageCountEl = document.getElementById('pageCount');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const zoomInBtn = document.getElementById('zoomIn');
        const zoomOutBtn = document.getElementById('zoomOut');
        const downloadBtn = document.getElementById('downloadBtn');

        async function renderPage(pageNum) {
            const page = await pdfDoc.getPage(pageNum);
            const containerWidth = container.clientWidth - 40;
            const viewport = page.getViewport({ scale: 1 });
            const fitScale = containerWidth / viewport.width;
            const finalScale = Math.min(fitScale, scale);
            const scaledViewport = page.getViewport({ scale: finalScale });

            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = scaledViewport.width;
            canvas.height = scaledViewport.height;

            await page.render({
                canvasContext: ctx,
                viewport: scaledViewport
            }).promise;

            return canvas;
        }

        async function renderAllPages() {
            container.innerHTML = '<div class="pdf-loading"><div class="spinner"></div><span>Rendering...</span></div>';
            const fragment = document.createDocumentFragment();
            
            for (let i = 1; i <= pdfDoc.numPages; i++) {
                const canvas = await renderPage(i);
                if (canvas) fragment.appendChild(canvas);
            }

            container.innerHTML = '';
            container.appendChild(fragment);
        }

        async function loadPDF() {
            try {
                pdfDoc = await pdfjsLib.getDocument(PDF_URL).promise;
                pageCountEl.textContent = pdfDoc.numPages;
                pageNumEl.textContent = 1;
                prevBtn.disabled = false;
                nextBtn.disabled = false;
                await renderAllPages();
            } catch (error) {
                console.error('PDF load error:', error);
                container.innerHTML = '<div class="pdf-error"><p>Unable to load document</p><p style="font-size:12px;margin-top:10px;">Please try refreshing the page</p></div>';
            }
        }

        // Download button
        downloadBtn.addEventListener('click', function() {
            window.open(PDF_URL, '_blank');
        });

        // Zoom controls
        zoomInBtn.addEventListener('click', async function() {
            scale = Math.min(scale + 0.25, 3);
            await renderAllPages();
        });

        zoomOutBtn.addEventListener('click', async function() {
            scale = Math.max(scale - 0.25, 0.5);
            await renderAllPages();
        });

        // Load PDF on page load
        loadPDF();
    })();
    </script>
</body>
</html>
